{
    "title": "*Entries",
    "database": "studio",
    "tableName": "tdz_entries",
    "className": "Tecnodesign_Studio_Entry",
    "properties": {
        "id": { "increment": "auto", "required": true, "primary": true },
        "title": { "type": "string", "size": 200 },
        "summary": { "type": "string" },
        "link": { "type": "string", "size": 200, "index": [ "z_entry__link_idx" ] },
        "source": { "type": "string", "size": 200 },
        "format": { "type": "string", "size": 100, "index": [ "z_entry__format_idx" ] },
        "published": { "type": "datetime", "index": [ "z_entry__published_idx" ] },
        "language": { "type": "string", "size": 10 },
        "type": { "type": "string", "size": 100, "index": [ "z_entry__type_idx" ] },
        "master": { "type": "string", "size": 100 },
        "version": { "type": "int" },
        "created": { "type": "datetime", "required": true },
        "updated": { "type": "datetime", "required": true },
        "expired": { "type": "datetime", "index": [ "z_entry__expired_idx" ] }
    },
    "relations": {
        "Tag": { "local": "id", "foreign": "entry", "type": "many", "className": "Tecnodesign_Studio_Tag" },
        "Contents": { "local": "id", "foreign": "entry", "type": "many", "className": "Tecnodesign_Studio_Content" },
        "Permission": { "local": "id", "foreign": "entry", "type": "many", "className": "Tecnodesign_Studio_Permission" },
        "Child": { "local": "id", "foreign": "entry", "type": "many", "className": "Tecnodesign_Studio_Relation" },
        "Parent": { "local": "id", "foreign": "parent", "type": "many", "className": "Tecnodesign_Studio_Relation" },
        "Related": { "local": "id", "foreign": "entry", "type": "many", "className": "Tecnodesign_Studio_Relation" },
        "Children": { "local": "id", "foreign": "parent", "type": "many", "className": "Tecnodesign_Studio_Relation" }
    },
    "scope": {
        "string": [ "title" ],
        "link": [ "id", "link", "title" ],
        "studio-new": [ "type", "title", "link", "summary", "published" ],
        "studio-edit": [ "type", "title", "link", "summary", "published", "contents" ],
        "review": { "*Title": "title", "*Link": "link", "*Summary": "summary", "*Last Modified": "updated" }
    },
    "order": {
        "published": "desc",
        "version": "desc"
    },
    "events": {
        "before-insert": [ "actAs" ],
        "before-update": [ "actAs" ],
        "before-delete": [ "actAs" ],
        "active-records": "`expired` is null"
    },
    "overlay": {
        "type": { "bind": "type", "format": "select", "choices": "choicesTypes" },
        "title": { "bind": "title", "required": true },
        "link": { "bind": "link", "attributes": { "data-type": "url" } },
        "summary": { "bind": "summary", "format": "textarea" },
        "published": { "bind": "published", "format": "datetime" },
        "contents": { "bind": "Contents", "format": "form" },
        "master": { "bind": "master", "format":"select", "choices": "choicesMaster" },
        "_tags": { "bind": "_tags", "multiple": true },
        "_parent_wip": { "bind": "Related", "multiple": true, "format": "form", "scope": "parent" }
    },
    "actAs": {
        "before-insert": { "auto-increment": [ "id" ], "timestampable": [ "created", "updated" ] },
        "before-update": { "auto-increment": [ "version" ], "timestampable": [ "updated" ] },
        "before-delete": { "auto-increment": [ "version" ], "timestampable": [ "updated" ], "soft-delete": [ "expired" ] }
    }
}